<Ui xmlns="http://www.blizzard.com/wow/ui/"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.blizzard.com/wow/ui/">

	<!--
		Total RP 3
		Copyright 2014 Sylvain Cossement (telkostrasz@telkostrasz.be)

		Licensed under the Apache License, Version 2.0 (the "License");
		you may not use this file except in compliance with the License.
		You may obtain a copy of the License at

			http://www.apache.org/licenses/LICENSE-2.0

		Unless required by applicable law or agreed to in writing, software
		distributed under the License is distributed on an "AS IS" BASIS,
		WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
		See the License for the specific language governing permissions and
		limitations under the License.
	-->

	<Include file="widgets.lua"/>

	<!--
		BackdropFrameTemplate

		Provides a common method of handling 9.x style frame backdrops
		across all client types.

		For 9.x clients this transparently resolves to using the Blizzard
		provided BackdropTemplateMixin; the usage of this template is
		intended to remain identical to the API provided by this client.

		For pre-9.x clients the original API functions for backdrop management
		on frames are kept unaltered, with the only change being load-time
		logic for translating 9.x style KeyValue pairs to the proper calls.

		Frames that inherit this template should ensure that any OnLoad
		or OnSizeChanged script handlers they install are affixed with the
		inherit="prepend" attribute, or that the handlers themselves invoke
		the OnBackdropLoaded/OnBackdropSizeChanged methods.
	-->

	<Frame name="TRP3_BackdropTemplate" mixin="TRP3_BackdropTemplateMixin" virtual="true">
		<Scripts>
			<OnLoad method="OnBackdropLoaded"/>
			<OnSizeChanged method="OnBackdropSizeChanged"/>
		</Scripts>
	</Frame>

	<!--
		Dropdown Menu

		This mirrors UIDropDownMenuTemplate except the scripts for activating
		the menu go through the MSA-DropDownMenu-1.0 library instead.
	-->
	<Frame name="TRP3_DropDownMenuTemplate" virtual="true">
		<Size>
			<AbsDimension x="40" y="32"/>
		</Size>
		<Layers>
			<Layer level="ARTWORK">
				<Texture name="$parentLeft" parentKey="Left" file="Interface\Glues\CharacterCreate\CharacterCreate-LabelFrame">
					<Size>
						<AbsDimension x="25" y="64"/>
					</Size>
					<Anchors>
						<Anchor point="TOPLEFT">
							<Offset>
								<AbsDimension x="0" y="17"/>
							</Offset>
						</Anchor>
					</Anchors>
					<TexCoords left="0" right="0.1953125" top="0" bottom="1"/>
				</Texture>
				<Texture name="$parentMiddle" parentKey="Middle" file="Interface\Glues\CharacterCreate\CharacterCreate-LabelFrame">
					<Size>
						<AbsDimension x="115" y="64"/>
					</Size>
					<Anchors>
						<Anchor point="LEFT" relativeKey="$parent.Left" relativePoint="RIGHT"/>
					</Anchors>
					<TexCoords left="0.1953125" right="0.8046875" top="0" bottom="1"/>
				</Texture>
				<Texture name="$parentRight" parentKey="Right" file="Interface\Glues\CharacterCreate\CharacterCreate-LabelFrame">
					<Size>
						<AbsDimension x="25" y="64"/>
					</Size>
					<Anchors>
						<Anchor point="LEFT" relativeKey="$parent.Middle" relativePoint="RIGHT"/>
					</Anchors>
					<TexCoords left="0.8046875" right="1" top="0" bottom="1"/>
				</Texture>
				<FontString parentKey="Text" name="$parentText" inherits="GameFontHighlightSmall" wordwrap="false" justifyH="RIGHT">
					<Size>
						<AbsDimension x="0" y="10"/>
					</Size>
					<Anchors>
						<Anchor point="RIGHT" relativeKey="$parent.Right">
							<Offset>
								<AbsDimension x="-43" y="2"/>
							</Offset>
						</Anchor>
					</Anchors>
				</FontString>
			</Layer>
			<Layer level="OVERLAY">
				<Texture parentKey="Icon" name="$parentIcon" hidden="true">
					<Size>
						<AbsDimension x="16" y="16"/>
					</Size>
					<Anchors>
						<Anchor point="LEFT">
							<Offset x="30" y="2"/>
						</Anchor>
					</Anchors>
				</Texture>
			</Layer>
		</Layers>
		<Frames>
			<Button parentKey="Button" name="$parentButton" motionScriptsWhileDisabled="true">
				<Size>
					<AbsDimension x="24" y="24"/>
				</Size>
				<Anchors>
					<Anchor point="TOPRIGHT" relativeKey="$parent.Right">
						<Offset>
							<AbsDimension x="-16" y="-18"/>
						</Offset>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnEnter>
						ExecuteFrameScript(self:GetParent(), "OnEnter");
					</OnEnter>
					<OnLeave>
						ExecuteFrameScript(self:GetParent(), "OnLeave");
					</OnLeave>
					<OnClick>
						MSA_ToggleDropDownMenu(nil, nil, self:GetParent());
						PlaySound(SOUNDKIT.IG_MAINMENU_OPTION_CHECKBOX_ON);
					</OnClick>
				</Scripts>
				<NormalTexture name="$parentNormalTexture" parentKey="NormalTexture" file="Interface\ChatFrame\UI-ChatIcon-ScrollDown-Up">
					<Size>
						<AbsDimension x="24" y="24"/>
					</Size>
					<Anchors>
						<Anchor point="RIGHT"/>
					</Anchors>
				</NormalTexture>
				<PushedTexture name="$parentPushedTexture" parentKey="PushedTexture" file="Interface\ChatFrame\UI-ChatIcon-ScrollDown-Down">
					<Size>
						<AbsDimension x="24" y="24"/>
					</Size>
					<Anchors>
						<Anchor point="RIGHT"/>
					</Anchors>
				</PushedTexture>
				<DisabledTexture name="$parentDisabledTexture" parentKey="DisabledTexture" file="Interface\ChatFrame\UI-ChatIcon-ScrollDown-Disabled">
					<Size>
						<AbsDimension x="24" y="24"/>
					</Size>
					<Anchors>
						<Anchor point="RIGHT"/>
					</Anchors>
				</DisabledTexture>
				<HighlightTexture name="$parentHighlightTexture" parentKey="HighlightTexture" file="Interface\Buttons\UI-Common-MouseHilight" alphaMode="ADD">
					<Size>
						<AbsDimension x="24" y="24"/>
					</Size>
					<Anchors>
						<Anchor point="RIGHT"/>
					</Anchors>
				</HighlightTexture>
			</Button>
		</Frames>
		<Scripts>
			<OnHide>
				MSA_CloseDropDownMenus();
			</OnHide>
		</Scripts>
	</Frame>

	<!--
		TRP3_TruncatedTextTemplate

		Fontable frame template that displays a tooltip for its contents if
		they would be truncated.
	-->

	<Frame name="TRP3_TruncatedTextTemplate" virtual="true" inherits="TruncatedTooltipScriptTemplate" mixin="TRP3_TruncatedTextMixin" motionScriptsWhileDisabled="true">
		<KeyValues>
			<KeyValue key="fontStringLayer" value="OVERLAY"/>
			<KeyValue key="fontStringTemplate" value="GameFontNormal"/>
			<KeyValue key="fontStringSublayer" value="0" type="number"/>
			<!-- <KeyValue key="fontStringColor" value="NORMAL_FONT_COLOR" type="global"/> -->
			<!-- <KeyValue key="fontStringJustifyH" value="CENTER"/> -->
			<!-- <KeyValue key="fontStringJustifyV" value="MIDDLE"/> -->
		</KeyValues>
		<Scripts>
			<OnLoad method="OnLoad" inherit="prepend"/>
		</Scripts>
	</Frame>

	<!-- Common close button  -->
	<Button name="TRP3_CloseButton" inherits="UIPanelCloseButton" virtual="true">
		<Scripts>
			<OnEnter>
				TRP3_RefreshTooltipForFrame(self);
			</OnEnter>
			<OnLeave>
				TRP3_MainTooltip:Hide();
			</OnLeave>
			<PostClick>
				TRP3_API.ui.misc.playUISound(SOUNDKIT.IG_MAINMENU_OPTION_CHECKBOX_ON);
			</PostClick>
		</Scripts>
	</Button>

	<!-- Common red Wow button template  -->
	<Button name="TRP3_CommonButton" inherits="UIPanelButtonTemplate" virtual="true">
		<Size x="90" y="20"/>
		<Scripts>
			<OnEnter>
				TRP3_RefreshTooltipForFrame(self);
			</OnEnter>
			<OnLeave>
				TRP3_MainTooltip:Hide();
			</OnLeave>
			<PostClick>
				TRP3_API.ui.misc.playUISound(SOUNDKIT.IG_MAINMENU_OPTION_CHECKBOX_ON);
			</PostClick>
		</Scripts>
	</Button>

	<!-- Common icon button  -->
	<Button name="TRP3_IconButton" virtual="true">
		<Size x="26" y="26"/>
		<Layers>
			<Layer level="OVERLAY">
				<Texture name="$parentIcon" parentKey="Icon" file="Interface\ICONS\INV_Misc_QuestionMark" setAllPoints="true"/>
			</Layer>
		</Layers>
		<NormalTexture file="Interface\AchievementFrame\UI-Achievement-IconFrame">
			<Size x="65" y="65"/>
			<Anchors>
				<Anchor point="CENTER" x="14" y="-14"/>
			</Anchors>
		</NormalTexture>
		<PushedTexture file="Interface\Buttons\UI-EmptySlot">
			<Size x="50" y="50"/>
			<Anchors>
				<Anchor point="CENTER" x="0" y="0"/>
			</Anchors>
		</PushedTexture>
		<DisabledTexture file="Interface\Buttons\UI-EmptySlot-Disabled">
			<Size x="47" y="47"/>
			<Anchors>
				<Anchor point="CENTER" x="0" y="0"/>
			</Anchors>
		</DisabledTexture>
		<HighlightTexture alphaMode="ADD" file="Interface\Buttons\UI-Quickslot-Depress"/>
		<Scripts>
			<OnEnter>
				TRP3_RefreshTooltipForFrame(self);
			</OnEnter>
			<OnLeave>
				TRP3_MainTooltip:Hide();
			</OnLeave>
			<PostClick>
				TRP3_API.ui.misc.playUISound(SOUNDKIT.IG_MAINMENU_OPTION_CHECKBOX_ON);
			</PostClick>
		</Scripts>
	</Button>

	<Button name="TRP3_ActionButton" virtual="true">
		<Size x="32" y="32"/>
		<NormalTexture file="Interface\Buttons\UI-Panel-SmallerButton-Up"/>
		<PushedTexture file="Interface\Buttons\UI-Panel-SmallerButton-Down"/>
		<HighlightTexture file="Interface\Buttons\UI-Panel-MinimizeButton-Highlight" alphaMode="ADD"/>
		<Scripts>
			<OnEnter>
				TRP3_RefreshTooltipForFrame(self);
			</OnEnter>
			<OnLeave>
				TRP3_MainTooltip:Hide();
			</OnLeave>
			<PostClick>
				TRP3_API.ui.misc.playUISound(SOUNDKIT.IG_MAINMENU_OPTION_CHECKBOX_ON);
			</PostClick>
		</Scripts>
	</Button>

	<!-- Help button  -->
	<Button name="TRP3_HelpButton" virtual="true">
		<Size x="16" y="16"/>
		<NormalTexture file="Interface\FriendsFrame\InformationIcon"/>
		<HighlightTexture file="Interface\FriendsFrame\InformationIcon-Highlight"/>
		<Scripts>
			<OnEnter>
				TRP3_RefreshTooltipForFrame(self);
			</OnEnter>
			<OnLeave>
				TRP3_MainTooltip:Hide();
			</OnLeave>
		</Scripts>
	</Button>

	<!-- Invisible button  -->
	<Button name="TRP3_InvisibleButton" virtual="true">
		<Size x="90" y="20"/>
		<Scripts>
			<OnEnter>
				TRP3_RefreshTooltipForFrame(self);
			</OnEnter>
			<OnLeave>
				TRP3_MainTooltip:Hide();
			</OnLeave>
		</Scripts>
	</Button>

	<!-- Category button -->
	<Button name="TRP3_CategoryButton" virtual="true">
		<Size x="158" y="24"/>
		<Layers>
			<Layer level="BACKGROUND">
				<Texture name="$parentBackground" file="Interface\AchievementFrame\UI-Achievement-Category-Background">
					<Size x="170" y="32"/>
					<Anchors>
						<Anchor point="TOPLEFT"/>
						<Anchor point="TOPRIGHT"/>
					</Anchors>
					<TexCoords left="0" right="0.6640625" top="0" bottom="1"/>
				</Texture>
			</Layer>
			<Layer level="BORDER">
				<Texture name="$parentIcon" file="Interface\ICONS\INV_Misc_QuestionMark" hidden="true">
					<Size x="16" y="16"/>
					<Anchors>
						<Anchor point="LEFT" x="9" y="-2"/>
					</Anchors>
				</Texture>
			</Layer>
			<Layer level="ARTWORK">
				<FontString name="$parentLabel" inherits="GameFontNormal" wordwrap="false" justifyH="CENTER">
					<Anchors>
						<Anchor point="BOTTOMLEFT" x="24" y="2"/>
						<Anchor point="TOPRIGHT" x="-16" y="-6"/>
					</Anchors>
				</FontString>
			</Layer>
		</Layers>
		<HighlightTexture file="Interface\AchievementFrame\UI-Achievement-Category-Highlight" alphaMode="ADD">
			<Anchors>
				<Anchor point="TOPLEFT" x="0" y="0"/>
				<Anchor point="BOTTOMRIGHT" x="-1" y="-7"/>
			</Anchors>
			<TexCoords left="0" right="0.6640625" top="0" bottom="1"/>
		</HighlightTexture>
		<Frames>
			<Button name="$parentClose" inherits="TRP3_CloseButton">
				<Anchors>
					<Anchor point="RIGHT" relativePoint="LEFT" x="5" y="-2"/>
				</Anchors>
			</Button>
		</Frames>
	</Button>

	<Slider name="TRP3_Slider" inherits="OptionsSliderTemplate" virtual="true">
		<Size x="140" y="15"/>
		<Layers>
			<Layer level="OVERLAY">
				<FontString name="$parentValText" inherits="GameFontNormal" justifyH="CENTER" text="[value]">
					<Size x="0" y="10"/>
					<Anchors>
						<Anchor point="LEFT"/>
						<Anchor point="RIGHT"/>
					</Anchors>
					<Color r="0.95" g="0.95" b="0.95"/>
				</FontString>
			</Layer>
		</Layers>
		<Scripts>
			<OnEnter>
				TRP3_RefreshTooltipForFrame(self);
			</OnEnter>
			<OnLeave>
				TRP3_MainTooltip:Hide();
			</OnLeave>
		</Scripts>
	</Slider>

	<!-- A bordered frame with a title -->
	<Frame name="TRP3_FieldSetFrame" virtual="true" inherits="TRP3_BackdropTemplate">
		<KeyValues>
			<KeyValue key="backdropInfo" value="TRP3_BACKDROP_MIXED_DIALOG_TOOLTIP_380_16_3333" type="global"/>
		</KeyValues>
		<Frames>
			<Frame name="$parentCaptionPanel" parentKey="caption" inherits="TRP3_BackdropTemplate">
				<KeyValues>
					<KeyValue key="backdropInfo" value="TRP3_BACKDROP_MIXED_BANK_TOOLTIP_100_16_4222" type="global"/>
				</KeyValues>
				<Size x="150" y="23"/>
				<Layers>
					<Layer level="OVERLAY">
						<FontString name="$parentCaption" text="[Caption text]" inherits="GameFontNormal" wordwrap="false">
							<Anchors>
								<Anchor point="LEFT" x="10" y="0"/>
								<Anchor point="RIGHT" x="-10" y="0"/>
							</Anchors>
							<Color r="0.95" g="0.95" b="0.95"/>
						</FontString>
					</Layer>
				</Layers>
				<Anchors>
					<Anchor point="TOPLEFT" x="16" y="10"/>
				</Anchors>
			</Frame>
		</Frames>
	</Frame>

	<!-- A bordered icon -->
	<Frame name="TRP3_SimpleIcon" virtual="true">
		<Size x="35" y="35"/>
		<Layers>
			<Layer level="BACKGROUND">
				<Texture name="$parentIcon" parentKey="Icon" file="Interface\ICONS\INV_Misc_QuestionMark">
					<Anchors>
						<Anchor point="TOPLEFT" x="0" y="0"/>
						<Anchor point="BOTTOMRIGHT" x="0" y="0"/>
					</Anchors>
				</Texture>
			</Layer>
		</Layers>
	</Frame>

	<!-- Titled edit box, TRP2 style -->
	<EditBox name="TRP3_TitledEditBox" letters="0" historyLines="10" autoFocus="false" virtual="true">
		<Size x="100" y="18"/>
		<Layers>
			<Layer level="BACKGROUND">
				<Texture parentKey="Left" file="Interface\Common\Common-Input-Border">
					<Size x="12" y="28"/>
					<Anchors>
						<Anchor point="TOPLEFT" x="-5" y="0"/>
					</Anchors>
					<TexCoords left="0" right="0.09375" top="0" bottom="1.0"/>
				</Texture>
				<Texture parentKey="Right" file="Interface\Common\Common-Input-Border">
					<Size x="12" y="28"/>
					<Anchors>
						<Anchor point="TOPRIGHT" x="5" y="0"/>
					</Anchors>
					<TexCoords left="0.90625" right="1.0" top="0" bottom="1.0"/>
				</Texture>
				<Texture parentKey="Center" file="Interface\Common\Common-Input-Border">
					<Size x="0" y="28"/>
					<Anchors>
						<Anchor point="LEFT" relativeKey="$parent.Left" relativePoint="RIGHT"/>
						<Anchor point="RIGHT" relativeKey="$parent.Right" relativePoint="LEFT"/>
					</Anchors>
					<TexCoords left="0.09375" right="0.90625" top="0" bottom="1.0"/>
				</Texture>
			</Layer>
			<Layer level="OVERLAY">
				<FontString name="$parentText" parentKey="title" text="" inherits="GameFontNormalSmall" justifyH="LEFT" justifyV="TOP">
					<Anchors>
						<Anchor point="TOPLEFT" x="5" y="5"/>
						<Anchor point="TOPRIGHT" x="0" y="5"/>
					</Anchors>
					<Color r="0.95" g="0.75" b="0.1"/>
				</FontString>
			</Layer>
		</Layers>
		<FontString inherits="GameFontWhite"/>
		<Scripts>
			<OnEscapePressed>
				self:ClearFocus()
			</OnEscapePressed>
			<OnEditFocusGained>
				if self.disabled then
					self:ClearFocus();
				else
					self:HighlightText();
				end
			</OnEditFocusGained>
			<OnEditFocusLost>
				self:HighlightText(0,0);
			</OnEditFocusLost>
			<OnEnter>
				TRP3_RefreshTooltipForFrame(self);
			</OnEnter>
			<OnLeave>
				TRP3_MainTooltip:Hide();
			</OnLeave>
		</Scripts>
	</EditBox>

	<!-- Titled edit box, TRP2 style, with help TT button -->
	<EditBox name="TRP3_TitledHelpEditBox" inherits="TRP3_TitledEditBox" virtual="true">
		<Frames>
			<Button name="$parentHelp" parentKey="help" inherits="TRP3_HelpButton" hidden="true">
				<Size x="14" y="14"/>
				<Anchors>
					<Anchor point="RIGHT" x="2" y="0"/>
				</Anchors>
			</Button>
		</Frames>
		<Scripts>
			<OnEditFocusGained>
				if self.disabled then
					self:ClearFocus();
				else
					self:HighlightText();
				end
				if self.help.titleText then
					self.help:Show();
				end
			</OnEditFocusGained>
			<OnEditFocusLost>
				self:HighlightText(0,0);
				self.help:Hide();
			</OnEditFocusLost>
		</Scripts>
	</EditBox>

	<!-- Checkbox with small label and TT compatible -->
	<CheckButton name="TRP3_CheckBox" inherits="InterfaceOptionsCheckButtonTemplate" virtual="true" checked="false">
		<Scripts>
			<OnLoad>
				self.Text = _G[self:GetName() .. "Text"];
				self.Text:SetFontObject(GameFontNormalSmall);
			</OnLoad>
			<OnEnter>
				TRP3_RefreshTooltipForFrame(self);
			</OnEnter>
			<OnLeave>
				TRP3_MainTooltip:Hide();
			</OnLeave>
			<OnClick/>
			<PostClick>
				TRP3_API.ui.misc.playUISound(SOUNDKIT.IG_MAINMENU_OPTION_CHECKBOX_ON);
			</PostClick>
		</Scripts>
	</CheckButton>

	<!-- Tab bar tab button -->
	<Button name="TRP3_TabBar_Tab" virtual="true">
		<Size>
			<AbsDimension x="10" y="32"/>
		</Size>
		<Layers>
			<Layer level="BACKGROUND">
				<Texture name="$parentLeft" file="Interface\CHATFRAME\ChatFrameTabUnsel-BGLeft">
					<Size>
						<AbsDimension x="25" y="32"/>
					</Size>
					<Anchors>
						<Anchor point="BOTTOMLEFT" x="0" y="0"/>
					</Anchors>
					<TexCoords left="0" right="1" top="0.3" bottom="1"/>
				</Texture>
				<Texture name="$parentRight" file="Interface\CHATFRAME\ChatFrameTabUnsel-BGRight">
					<Size>
						<AbsDimension x="25" y="32"/>
					</Size>
					<Anchors>
						<Anchor point="BOTTOMRIGHT" x="0" y="0"/>
					</Anchors>
					<TexCoords left="0" right="1" top="0.3" bottom="1"/>
				</Texture>
				<Texture name="$parentMiddle" file="Interface\CHATFRAME\ChatFrameTabUnsel-BGMid">
					<Anchors>
						<Anchor point="TOPLEFT" relativeTo="$parentLeft" relativePoint="TOPRIGHT"/>
						<Anchor point="BOTTOMRIGHT" relativeTo="$parentRight" relativePoint="BOTTOMLEFT"/>
					</Anchors>
					<TexCoords left="0" right="1" top="0.3" bottom="1"/>
				</Texture>
			</Layer>
		</Layers>
		<ButtonText name="$parentText">
			<Size>
				<AbsDimension x="0" y="32"/>
			</Size>
			<Anchors>
				<Anchor point="CENTER">
					<Offset>
						<AbsDimension x="0" y="-2"/>
					</Offset>
				</Anchor>
			</Anchors>
		</ButtonText>
		<NormalFont style="GameFontHighlightSmall"/>
		<HighlightFont style="GameFontHighlightSmall"/>
		<DisabledFont style="GameFontHighlight"/>
		<HighlightTexture name="$parentHighlightTexture" file="Interface\PaperDollInfoFrame\UI-Character-Tab-Highlight-yellow" alphaMode="ADD">
			<Anchors>
				<Anchor point="TOPLEFT">
					<Offset>
						<AbsDimension x="5" y="-2"/>
					</Offset>
				</Anchor>
				<Anchor point="BOTTOMRIGHT">
					<Offset>
						<AbsDimension x="-5" y="-2"/>
					</Offset>
				</Anchor>
			</Anchors>
		</HighlightTexture>
		<Scripts>
			<PostClick>
				TRP3_API.ui.misc.playUISound(SOUNDKIT.IG_CHARACTER_INFO_TAB);
			</PostClick>
		</Scripts>
	</Button>

	<Frame name="TRP3_TextAreaBase" virtual="true" enableMouse="true">
		<Frames>
			<ScrollFrame parentKey="scroll" name="$parentScroll" inherits="UIPanelScrollFrameTemplate">
				<Anchors>
					<Anchor point="TOP" x="0" y="-10"/>
					<Anchor point="BOTTOM" x="0" y="10"/>
					<Anchor point="LEFT" x="15" y="0"/>
					<Anchor point="RIGHT" x="-18" y="0"/>
				</Anchors>
				<ScrollChild>
					<EditBox name="$parentText" parentKey="text" multiLine="true" enableMouse="false" autoFocus="false">
						<Scripts>
							<OnShow>
								self:SetWidth(self:GetParent():GetParent():GetWidth() - 40);
							</OnShow>
							<OnTextChanged>
								if self:IsVisible() and self:GetCursorPosition() == string.len(self:GetText()) then
								self:GetParent():SetVerticalScroll(self:GetParent():GetVerticalScrollRange());
								end
							</OnTextChanged>
							<OnEscapePressed>
								self:ClearFocus();
							</OnEscapePressed>
							<OnEditFocusGained>
								self:GetParent():GetParent().dummy:Hide();
							</OnEditFocusGained>
							<OnEditFocusLost>
								self:HighlightText(0,0);
								self:GetParent():GetParent().dummy:Show();
							</OnEditFocusLost>
						</Scripts>
						<FontString inherits="ChatFontNormal"/>
					</EditBox>
				</ScrollChild>
			</ScrollFrame>
			<Button name="$parentFocusDummy" parentKey="dummy">
				<Anchors>
					<Anchor point="TOP" x="0" y="5"/>
					<Anchor point="BOTTOM" x="0" y="-5"/>
					<Anchor point="LEFT" x="0" y="0"/>
					<Anchor point="RIGHT" x="-10" y="0"/>
				</Anchors>
				<Scripts>
					<OnClick>
						self:GetParent().scroll.text:SetFocus();
					</OnClick>
				</Scripts>
			</Button>
		</Frames>
	</Frame>

	<!-- Text area -->
	<Frame name="TRP3_TextArea" inherits="TRP3_TextAreaBase" virtual="true" enableMouse="true">
		<Layers>
			<Layer level="BACKGROUND">
				<Texture file="Interface\DialogFrame\UI-DialogBox-Background" horizTile="true" vertTile="true">
					<Anchors>
						<Anchor point="TOPLEFT" relativePoint="TOPLEFT" x="3" y="-4"/>
						<Anchor point="BOTTOMRIGHT" relativePoint="BOTTOMRIGHT" x="-5" y="2"/>
					</Anchors>
				</Texture>
			</Layer>
			<Layer level="BORDER" textureSubLevel="1">
				<Texture name="$parentInsetBotLeftCorner" inherits="UI-Frame-InnerBotLeftCorner" parentKey="InsetBorderBottomLeft">
					<Anchors>
						<Anchor point="BOTTOMLEFT" x="2" y="0"/>
					</Anchors>
				</Texture>
				<Texture name="$parentInsetBotRightCorner" inherits="UI-Frame-InnerBotRight" parentKey="InsetBorderBottomRight">
					<Anchors>
						<Anchor point="BOTTOMRIGHT" x="-3" y="0"/>
					</Anchors>
				</Texture>
				<Texture name="$parentInsetTopLeftCorner" inherits="UI-Frame-InnerTopLeft" parentKey="InsetBorderTopLeft">
					<Anchors>
						<Anchor point="TOPLEFT" x="2" y="-3"/>
					</Anchors>
				</Texture>
				<Texture name="$parentInsetTopRightCorner" inherits="UI-Frame-InnerTopRight" parentKey="InsetBorderTopmRight">
					<Anchors>
						<Anchor point="TOPRIGHT" x="-3" y="-3"/>
					</Anchors>
				</Texture>
			</Layer>
			<Layer level="BORDER">
				<Texture name="$parentInsetBottomBorder" inherits="_UI-Frame-InnerBotTile" parentKey="InsetBorderBottom">
					<Anchors>
						<Anchor point="BOTTOMLEFT" relativeKey="$parent.InsetBorderBottomLeft" relativePoint="BOTTOMRIGHT"/>
						<Anchor point="BOTTOMRIGHT" relativeKey="$parent.InsetBorderBottomRight" relativePoint="BOTTOMLEFT"/>
					</Anchors>
				</Texture>

				<Texture name="$parentInsetLeftBorder" inherits="!UI-Frame-InnerLeftTile" parentKey="InsetBorderLeft">
					<Anchors>
						<Anchor point="TOPLEFT" x="2" y="-3"/>
						<Anchor point="BOTTOMLEFT" relativeKey="$parent.InsetBorderBottomLeft" relativePoint="TOPLEFT"/>
					</Anchors>
				</Texture>
				<Texture name="$parentInsetRightBorder" inherits="!UI-Frame-InnerRightTile" parentKey="InsetBorderRight">
					<Anchors>
						<Anchor point="TOPRIGHT" x="-3" y="-3"/>
						<Anchor point="BOTTOMRIGHT" relativeKey="$parent.InsetBorderBottomRight" relativePoint="TOPRIGHT"/>
					</Anchors>
				</Texture>
				<Texture name="$parentInsetTopBorder" inherits="_UI-Frame-InnerTopTile" parentKey="InsetBorderBottom">
					<Anchors>
						<Anchor point="TOPLEFT" relativeKey="$parent.InsetBorderLeft" relativePoint="TOPLEFT"/>
						<Anchor point="TOPRIGHT" relativeKey="$parent.InsetBorderRight" relativePoint="TOPRIGHT"/>
					</Anchors>
				</Texture>
			</Layer>
		</Layers>
	</Frame>

	<!-- Color picker button -->
	<Button name="TRP3_SearchButton" virtual="true" inherits="TRP3_IconButton">
		<Scripts>
			<OnLoad>
				self:SetScale(0.8);
				self:RegisterForClicks("LeftButtonUp", "RightButtonUp");
				_G[self:GetName() .. "Icon"]:SetTexture("Interface\\MINIMAP\\TRACKING\\None");
			</OnLoad>
		</Scripts>
	</Button>

	<!-- Color picker button -->
	<Button name="TRP3_ColorPickerButton" virtual="true">
		<Size x="16" y="16"/>
		<HighlightTexture alphaMode="ADD" name="$parentSwatchBgHighlight" file="Interface\SpellActivationOverlay\IconAlert">
			<Size x="71" y="68"/>
			<Anchors>
				<Anchor x="-11" y="11" point="TOPLEFT"/>
			</Anchors>
			<TexCoords left="0" right="1" top="0.53" bottom="1"/>
			<Color r="1.0" g="1.0" b="1.0" a="0.40"/>
		</HighlightTexture>
		<Layers>
			<Layer level="BACKGROUND">
				<Texture name="$parentSwatchBg">
					<Color r="1.0" g="1.0" b="1.0"/>
				</Texture>
			</Layer>
			<Layer level="BORDER">
				<Texture file="Interface\ACHIEVEMENTFRAME\UI-Achievement-IconFrame">
					<Size>
						<AbsDimension x="45" y="45"/>
					</Size>
					<Anchors>
						<Anchor x="-5" y="5" point="TOPLEFT"/>
					</Anchors>
				</Texture>
			</Layer>
			<Layer level="OVERLAY">
				<Texture file="Interface\Cooldown\star4" name="$parentBlink" alpha="0.0" alphaMode="ADD">
					<Animations>
						<AnimationGroup name="$parentAnimate" looping="NONE">
							<Alpha duration="0.4" toAlpha="1" fromAlpha="0" smoothing="IN" order="1"/>
							<Rotation degrees="-45" duration="0.4" smoothing="IN" order="1"/>
							<Alpha duration="0.4" toAlpha="0" fromAlpha="1" smoothing="OUT" startDelay="0.4" order="1"/>
							<Rotation degrees="-45" duration="0.4" smoothing="OUT" startDelay="0.4" order="1"/>

						</AnimationGroup>
					</Animations>
					<Size x="40" y="40"/>
					<Anchors>
						<Anchor x="0" y="0" point="CENTER"/>
					</Anchors>
				</Texture>
			</Layer>
		</Layers>
		<Scripts>
			<OnLoad function="TRP3_ColorButtonLoad"/>
			<OnClick>
				if button == "LeftButton" then
					if IsShiftKeyDown() or (TRP3_API.configuration.getValue("default_color_picker")) then
						TRP3_API.popup.showDefaultColorPicker({self.setColor, self.red, self.green, self.blue});
					else
						TRP3_API.popup.showPopup(TRP3_API.popup.COLORS, nil, {self.setColor, self.red, self.green, self.blue});
					end
				elseif button == "RightButton" then
					self.setColor(nil, nil, nil);
				end
			</OnClick>
			<OnEnter>
				TRP3_RefreshTooltipForFrame(self);
			</OnEnter>
			<OnLeave>
				TRP3_MainTooltip:Hide();
			</OnLeave>
			<PostClick>
				TRP3_API.ui.misc.playUISound(SOUNDKIT.IG_MAINMENU_OPTION_CHECKBOX_ON);
			</PostClick>
		</Scripts>
	</Button>

	<!-- Tutorial style hovered frame -->
	<Frame name="TRP3_HoveredFrame" inherits="GlowBoxTemplate" virtual="true">
		<Size x="220" y="100"/>
		<Layers>
			<Layer level="ARTWORK">
				<Texture parentKey="ArrowUP" inherits="HelpPlateArrowDOWN" hidden="true">
					<Size x="53" y="21"/>
					<Anchors>
						<Anchor point="TOP" relativePoint="BOTTOM" x="0" y="3"/>
					</Anchors>
				</Texture>
				<Texture parentKey="ArrowDOWN" inherits="HelpPlateArrowUP" hidden="true">
					<Size x="53" y="21"/>
					<Anchors>
						<Anchor point="BOTTOM" relativePoint="TOP" x="0" y="-3"/>
					</Anchors>
				</Texture>
				<Texture parentKey="ArrowRIGHT" inherits="HelpPlateArrowDOWN" hidden="true">
					<Size x="53" y="21"/>
					<Anchors>
						<Anchor point="RIGHT" relativePoint="LEFT" x="3" y="0"/>
					</Anchors>
				</Texture>
				<Texture parentKey="ArrowLEFT" inherits="HelpPlateArrowDOWN" hidden="true">
					<Size x="53" y="21"/>
					<Anchors>
						<Anchor point="LEFT" relativePoint="RIGHT" x="-3" y="0"/>
					</Anchors>
				</Texture>
			</Layer>
		</Layers>
		<Scripts>
			<OnLoad>
				SetClampedTextureRotation(self.ArrowLEFT, 270);
				SetClampedTextureRotation(self.ArrowRIGHT, 90);
			</OnLoad>
		</Scripts>
	</Frame>

	<!-- More classic style hovered frame -->
	<Frame name="TRP3_AltHoveredFrame" virtual="true" inherits="TRP3_BackdropTemplate">
		<KeyValues>
			<KeyValue key="backdropInfo" value="TRP3_BACKDROP_GOLD_DIALOG_0_26" type="global"/>
		</KeyValues>
		<Size x="220" y="100"/>
		<Layers>
			<Layer level="BACKGROUND">
				<Texture parentKey="Background" file="Interface\Collections\CollectionsBackgroundTile" horizTile="true" vertTile="true">
					<Size x="256" y="256"/>
					<Anchors>
						<Anchor point="TOP" x="0" y="-5"/>
						<Anchor point="BOTTOM" x="0" y="5"/>
						<Anchor point="LEFT" x="5" y="0"/>
						<Anchor point="RIGHT" x="-5" y="0"/>
					</Anchors>
				</Texture>
			</Layer>
			<Layer level="ARTWORK">
				<Texture parentKey="ArrowUP" inherits="HelpPlateArrowDOWN" hidden="true">
					<Size x="53" y="21"/>
					<Anchors>
						<Anchor point="TOP" relativePoint="BOTTOM" x="0" y="3"/>
					</Anchors>
				</Texture>
				<Texture parentKey="ArrowDOWN" inherits="HelpPlateArrowUP" hidden="true">
					<Size x="53" y="21"/>
					<Anchors>
						<Anchor point="BOTTOM" relativePoint="TOP" x="0" y="-3"/>
					</Anchors>
				</Texture>
				<Texture parentKey="ArrowRIGHT" inherits="HelpPlateArrowDOWN" hidden="true">
					<Size x="53" y="21"/>
					<Anchors>
						<Anchor point="RIGHT" relativePoint="LEFT" x="3" y="0"/>
					</Anchors>
				</Texture>
				<Texture parentKey="ArrowLEFT" inherits="HelpPlateArrowDOWN" hidden="true">
					<Size x="53" y="21"/>
					<Anchors>
						<Anchor point="LEFT" relativePoint="RIGHT" x="-3" y="0"/>
					</Anchors>
				</Texture>

				<Texture parentKey="BGCornerTopLeft" atlas="collections-background-corner" useAtlasSize="false">
					<Size x="50" y="50"/>
					<Anchors>
						<Anchor point="TOPLEFT" x="9" y="-8"/>
					</Anchors>
				</Texture>

				<Texture parentKey="BGCornerTopRight" atlas="collections-background-corner" useAtlasSize="false">
					<Size x="50" y="50"/>
					<Anchors>
						<Anchor point="TOPRIGHT" x="-9" y="-8"/>
					</Anchors>
					<TexCoords left="1.0" right="0.0" top="0.0" bottom="1.0"/>
				</Texture>

				<Texture parentKey="BGCornerBottomLeft" atlas="collections-background-corner" useAtlasSize="false">
					<Size x="50" y="50"/>
					<Anchors>
						<Anchor point="BOTTOMLEFT" x="9" y="8"/>
					</Anchors>
					<TexCoords left="0.0" right="1.0" top="1.0" bottom="0.0"/>
				</Texture>

				<Texture parentKey="BGCornerBottomRight" atlas="collections-background-corner" useAtlasSize="false">
					<Size x="50" y="50"/>
					<Anchors>
						<Anchor point="BOTTOMRIGHT" x="-9" y="8"/>
					</Anchors>
					<TexCoords left="1.0" right="0.0" top="1.0" bottom="0.0"/>
				</Texture>
			</Layer>
		</Layers>
		<Scripts>
			<OnLoad inherit="prepend">
				SetClampedTextureRotation(self.ArrowLEFT, 270);
				SetClampedTextureRotation(self.ArrowRIGHT, 90);
			</OnLoad>
		</Scripts>
		<Animations>
			<AnimationGroup parentKey="showAnimationFromRight">
				<Translation offsetX="-10"  duration="0"/>
				<Translation offsetX="10" duration="0.2" smoothing="OUT"/>
				<Alpha fromAlpha="0" toAlpha="1" duration="0.3" smoothing="OUT"/>
			</AnimationGroup>
			<AnimationGroup parentKey="showAnimationFromLeft">
				<Translation offsetX="10"  duration="0"/>
				<Translation offsetX="-10" duration="0.2" smoothing="OUT"/>
				<Alpha fromAlpha="0" toAlpha="1" duration="0.3" smoothing="OUT"/>
			</AnimationGroup>
			<AnimationGroup parentKey="showAnimationFromTop">
				<Translation offsetY="10"  duration="0"/>
				<Translation offsetY="-10" duration="0.2" smoothing="OUT"/>
				<Alpha fromAlpha="0" toAlpha="1" duration="0.3" smoothing="OUT"/>
			</AnimationGroup>
			<AnimationGroup parentKey="showAnimationFromBottom">
				<Translation offsetY="-10"  duration="0"/>
				<Translation offsetY="10" duration="0.2" smoothing="OUT"/>
				<Alpha fromAlpha="0" toAlpha="1" duration="0.3" smoothing="OUT"/>
			</AnimationGroup>
		</Animations>
	</Frame>

	<!-- Resize button -->
	<Button name="TRP3_ResizeButton" virtual="true">
		<Size x="32" y="32"/>
		<Scripts>
			<OnLoad>
				TRP3_API.ui.frame.initResize(self);
			</OnLoad>
		</Scripts>
		<NormalTexture file="Interface\Buttons\UI-Panel-SmallerButton-Up">
			<TexCoords left="1" right="0" top="0" bottom="1"/>
		</NormalTexture>
		<PushedTexture file="Interface\Buttons\UI-Panel-SmallerButton-Down">
			<TexCoords left="1" right="0" top="0" bottom="1"/>
		</PushedTexture>
		<HighlightTexture file="Interface\Buttons\UI-Panel-MinimizeButton-Highlight" alphaMode="ADD"/>
	</Button>

	<Slider name="TRP3_Scrollbar" virtual="true">
		<Size>
			<AbsDimension x="18" y="0"/>
		</Size>
		<Anchors>
			<Anchor point="TOP" x="0" y="-15"/>
			<Anchor point="RIGHT" x="0" y="0"/>
			<Anchor point="BOTTOM" x="0" y="12"/>
		</Anchors>
		<Layers>
			<Layer level="BACKGROUND">
				<Texture parentKey="trackBackground">
					<Anchors>
						<Anchor point="TOPLEFT" x="0" y="10"/>
						<Anchor point="BOTTOMRIGHT" x="0" y="-10"/>
					</Anchors>
					<Color r="0" g="0" b="0" a="0.5"/>
				</Texture>
			</Layer>
		</Layers>
		<Frames>
			<Button parentKey="upButton" inherits="UIPanelScrollUpButtonTemplate">
				<Anchors>
					<Anchor point="TOP" x="0" y="12"/>
				</Anchors>
				<Scripts>
					<OnClick>
						local slider = self:GetParent();
						if slider:IsEnabled() then
							slider:SetValue(slider:GetValue() - 1);
							TRP3_API.ui.misc.playUISound(SOUNDKIT.U_CHAT_SCROLL_BUTTON);
						else
							self:Disable();
						end
					</OnClick>
				</Scripts>
			</Button>
			<Button parentKey="downButton" inherits="UIPanelScrollDownButtonTemplate">
				<Anchors>
					<Anchor point="BOTTOM" x="0" y="-12"/>
				</Anchors>
				<Scripts>
					<OnClick>
						local slider = self:GetParent();
						if slider:IsEnabled() then
							slider:SetValue(slider:GetValue() + 1);
							TRP3_API.ui.misc.playUISound(SOUNDKIT.U_CHAT_SCROLL_BUTTON);
						else
							self:Disable();
						end
					</OnClick>
				</Scripts>
			</Button>
		</Frames>
		<ThumbTexture parentKey="thumbTexture" inherits="UIPanelScrollBarButton" file="Interface\Buttons\UI-ScrollBar-Knob">
			<Size x="18" y="24"/>
			<TexCoords left="0.20" right="0.80" top="0.125" bottom="0.875"/>
		</ThumbTexture>
		<Scripts>
			<OnLoad>
				self:SetMinMaxValues(0, 6);
				self:SetValueStep(1);
				self:SetOrientation("VERTICAL");
			</OnLoad>
		</Scripts>
	</Slider>
	<Frame name="TRP3_InnerFrame" virtual="true">
		<Layers>
			<Layer level="BACKGROUND">
				<Texture file="Interface\DialogFrame\UI-DialogBox-Background" horizTile="true" vertTile="true">
					<Anchors>
						<Anchor point="TOPLEFT" relativePoint="TOPLEFT" x="0" y="0"/>
						<Anchor point="BOTTOMRIGHT" relativePoint="BOTTOMRIGHT" x="0" y="0"/>
					</Anchors>
				</Texture>
			</Layer>
			<Layer level="BORDER" textureSubLevel="-5">
				<Texture name="$parentInsetBotLeftCorner" inherits="UI-Frame-InnerBotLeftCorner" parentKey="InsetBorderBottomLeft">
					<Anchors>
						<Anchor point="BOTTOMLEFT"  x="-3" y="-3"/>
					</Anchors>
				</Texture>
				<Texture name="$parentInsetBotRightCorner" inherits="UI-Frame-InnerBotRight" parentKey="InsetBorderBottomRight">
					<Anchors>
						<Anchor point="BOTTOMRIGHT"  x="3" y="-3"/>
					</Anchors>
				</Texture>
				<Texture name="$parentInsetBottomBorder" inherits="_UI-Frame-InnerBotTile" parentKey="InsetBorderBottom">
					<Anchors>
						<Anchor point="BOTTOMLEFT" relativeTo="$parentInsetBotLeftCorner" relativePoint="BOTTOMRIGHT"/>
						<Anchor point="BOTTOMRIGHT" relativeTo="$parentInsetBotRightCorner" relativePoint="BOTTOMLEFT"/>
					</Anchors>
				</Texture>
				<Texture name="$parentInsetLeftBorder" inherits="!UI-Frame-InnerLeftTile" parentKey="InsetBorderLeft">
					<Anchors>
						<Anchor point="TOPLEFT" x="-3" y="0"/>
						<Anchor point="BOTTOMLEFT" relativeTo="$parentInsetBotLeftCorner" relativePoint="TOPLEFT"/>
					</Anchors>
				</Texture>
				<Texture name="$parentInsetRightBorder" inherits="!UI-Frame-InnerRightTile" parentKey="InsetBorderRight">
					<Anchors>
						<Anchor point="TOPRIGHT"  x="3" y="0"/>
						<Anchor point="BOTTOMRIGHT" relativeTo="$parentInsetBotRightCorner" relativePoint="TOPRIGHT"/>
					</Anchors>
				</Texture>
				<Texture name="$parentInsetTopBorder" inherits="_UI-Frame-InnerTopTile" parentKey="InsetBorderBottom">
					<Anchors>
						<Anchor point="TOPLEFT" relativeTo="$parentInsetLeftBorder" relativePoint="TOPLEFT"/>
						<Anchor point="TOPRIGHT" relativeTo="$parentInsetRightBorder" relativePoint="TOPRIGHT"/>
					</Anchors>
				</Texture>
			</Layer>
		</Layers>
	</Frame>
	<Frame name="TRP3_TitledDropdown" inherits="TRP3_DropDownMenuTemplate" enableMouse="true" virtual="true">
		<Layers>
			<Layer level="OVERLAY">
				<FontString name="$parentTitle" parentKey="title" text="" inherits="GameFontNormalSmall" justifyH="LEFT" justifyV="TOP">
					<Anchors>
						<Anchor point="TOPLEFT" x="27" y="4"/>
						<Anchor point="TOPRIGHT" x="22" y="4"/>
					</Anchors>
					<Color r="0.95" g="0.75" b="0.1"/>
				</FontString>
			</Layer>
		</Layers>
		<Scripts>
			<OnEnter>
				TRP3_RefreshTooltipForFrame(self);
			</OnEnter>
			<OnLeave>
				TRP3_MainTooltip:Hide();
			</OnLeave>
		</Scripts>
	</Frame>

	<Frame name="TRP3_StaticPopUpCopyDropdown" hidden="true" parent="UIParent" frameStrata="FULLSCREEN_DIALOG" enableMouse="true">
		<Anchors>
			<Anchor point="CENTER" y="30" />
		</Anchors>
		<Size x="360" y="160" />
		<Layers>
			<Layer>
				<FontString parentKey="Text" inherits="GameFontHighlight">
					<Anchors>
						<Anchor point="TOP" relativePoint="TOP" y="-25" />
						<Anchor point="LEFT" x="35" />
						<Anchor point="RIGHT" x="-35" />
					</Anchors>
				</FontString>
			</Layer>
		</Layers>
		<Frames>
			<Button parentKey="CloseButton" inherits="UIPanelCloseButton">
				<Anchors>
					<Anchor point="TOPRIGHT">
						<Offset>
							<AbsDimension x="-3" y="-3" />
						</Offset>
					</Anchor>
				</Anchors>
			</Button>
			<EditBox parentKey="CopyText">
				<Anchors>
					<Anchor point="LEFT" x="35" />
					<Anchor point="RIGHT" x="-50" />
					<Anchor point="TOP" relativeKey="$parent.Text" relativePoint="BOTTOM" y="-10" />
				</Anchors>
				<Size y="32" />
				<Layers>
					<Layer level="BACKGROUND">
						<Texture parentKey="Left" file="Interface\ChatFrame\UI-ChatInputBorder-Left2">
							<Size>
								<AbsDimension x="32" y="32" />
							</Size>
							<Anchors>
								<Anchor point="LEFT" x="-10" y="0" />
							</Anchors>
						</Texture>
						<Texture parentKey="Right" file="Interface\ChatFrame\UI-ChatInputBorder-Right2">
							<Size>
								<AbsDimension x="32" y="32" />
							</Size>
							<Anchors>
								<Anchor point="RIGHT" x="10" y="0" />
							</Anchors>
						</Texture>
						<Texture parentKey="Mid" file="Interface\ChatFrame\UI-ChatInputBorder-Mid2" horizTile="true">
							<Size>
								<AbsDimension x="0" y="32" />
							</Size>
							<Anchors>
								<Anchor point="TOPLEFT" relativeKey="$parent.Left" relativePoint="TOPRIGHT">
									<Offset>
										<AbsDimension x="0" y="0" />
									</Offset>
								</Anchor>
								<Anchor point="TOPRIGHT" relativeKey="$parent.Right" relativePoint="TOPLEFT">
									<Offset>
										<AbsDimension x="0" y="0" />
									</Offset>
								</Anchor>
							</Anchors>
						</Texture>
					</Layer>
				</Layers>
				<FontString inherits="ChatFontNormal" setAllPoints="true" />
			</EditBox>
			<Button parentKey="DropdownButton" name="$parentDropdownButton" motionScriptsWhileDisabled="true" >
				<Size>
					<AbsDimension x="32" y="32"/>
				</Size>
				<Anchors>
					<Anchor point="TOPLEFT" relativePoint="TOPRIGHT" relativeKey="$parent.CopyText.Right">
						<Offset>
							<AbsDimension x="-10" y="0" />
						</Offset>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnEnter>
						ExecuteFrameScript(self:GetParent(), "OnEnter");
					</OnEnter>
					<OnLeave>
						ExecuteFrameScript(self:GetParent(), "OnLeave");
					</OnLeave>
					<OnClick>
						MSA_ToggleDropDownMenu(nil, nil, self:GetParent());
						PlaySound(SOUNDKIT.IG_MAINMENU_OPTION_CHECKBOX_ON);
					</OnClick>
				</Scripts>
				<NormalTexture name="$parentNormalTexture" parentKey="NormalTexture" file="Interface\ChatFrame\UI-ChatIcon-ScrollDown-Up">
					<Size>
						<AbsDimension x="32" y="32"/>
					</Size>
					<Anchors>
						<Anchor point="RIGHT"/>
					</Anchors>
				</NormalTexture>
				<PushedTexture name="$parentPushedTexture" parentKey="PushedTexture" file="Interface\ChatFrame\UI-ChatIcon-ScrollDown-Down">
					<Size>
						<AbsDimension x="32" y="32"/>
					</Size>
					<Anchors>
						<Anchor point="RIGHT"/>
					</Anchors>
				</PushedTexture>
				<DisabledTexture name="$parentDisabledTexture" parentKey="DisabledTexture" file="Interface\ChatFrame\UI-ChatIcon-ScrollDown-Disabled">
					<Size>
						<AbsDimension x="32" y="32"/>
					</Size>
					<Anchors>
						<Anchor point="RIGHT"/>
					</Anchors>
				</DisabledTexture>
				<HighlightTexture name="$parentHighlightTexture" parentKey="HighlightTexture" file="Interface\Buttons\UI-Common-MouseHilight" alphaMode="ADD">
					<Size>
						<AbsDimension x="32" y="32"/>
					</Size>
					<Anchors>
						<Anchor point="RIGHT"/>
					</Anchors>
				</HighlightTexture>
			</Button>
			<Button parentKey="Button">
				<Anchors>
					<Anchor point="BOTTOM" relativePoint="BOTTOM" y="20" />
				</Anchors>
				<Size x="128" y="21" />
				<ButtonText parentKey="Text">
					<Anchors>
						<Anchor point="CENTER">
							<Offset x="0" y="1" />
						</Anchor>
					</Anchors>
				</ButtonText>
				<NormalTexture file="Interface\Buttons\UI-DialogBox-Button-Up">
					<TexCoords left="0.0" right="1.0" top="0.0" bottom="0.71875" />
				</NormalTexture>
				<PushedTexture file="Interface\Buttons\UI-DialogBox-Button-Down">
					<TexCoords left="0.0" right="1.0" top="0.0" bottom="0.71875" />
				</PushedTexture>
				<DisabledTexture file="Interface\Buttons\UI-DialogBox-Button-Disabled">
					<TexCoords left="0.0" right="1.0" top="0.0" bottom="0.71875" />
				</DisabledTexture>
				<HighlightTexture file="Interface\Buttons\UI-DialogBox-Button-Highlight" alphaMode="ADD">
					<TexCoords left="0.0" right="1.0" top="0.0" bottom="0.71875" />
				</HighlightTexture>
				<NormalFont style="GameFontNormal" />
				<DisabledFont style="GameFontDisable" />
				<HighlightFont style="GameFontHighlight" />
				<Scripts>
					<OnClick>
						HideParentPanel(self);
					</OnClick>
				</Scripts>
			</Button>
		</Frames>
		<Scripts>
			<OnLoad>
				-- 9.x: Set backdrop at load time as the XML Backdrop element
				--      is no longer supported. A mixin could be used, but
				--      this is the simplest case for now that should work
				--      on all clients.

				if BackdropTemplateMixin then
				Mixin(self, BackdropTemplateMixin);
				self:SetScript("OnSizeChanged", self.OnBackdropSizeChanged);
				BackdropTemplateMixin.OnBackdropLoaded(self);
				end

				self:SetBackdrop(BACKDROP_DIALOG_32_32 or {
				bgFile = "Interface\\DialogFrame\\UI-DialogBox-Background",
				edgeFile = "Interface\\DialogFrame\\UI-DialogBox-Border",
				tile = true,
				tileEdge = true,
				tileSize = 32,
				edgeSize = 32,
				insets = { left = 11, right = 12, top = 12, bottom = 11 },
				});
			</OnLoad>
			<OnHide>
				MSA_CloseDropDownMenus();
			</OnHide>
		</Scripts>
	</Frame>

</Ui>
